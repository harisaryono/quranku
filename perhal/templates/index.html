<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quranku - Beranda</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/index.css') }}">
    <script>
        async function handleJuzSearch(event) {
            event.preventDefault();
            let juz = document.querySelector("select[name='juz']").value;
            if (!juz) return;
            
            let response = await fetch(`/api/juz/${juz}`);
            let data = await response.json();
            if (data.start_page) {
                window.location.href = `/page/${data.start_page}`;
            }
        }

        async function handleSurahSearch(event) {
            event.preventDefault();
            let surah = document.querySelector("input[name='surah']").value;
            let ayah = document.querySelector("input[name='ayah']").value;
            if (!surah || !ayah) return;
            
            let response = await fetch(`/api/surah/${surah}/ayah/${ayah}`);
            let data = await response.json();
            if (data.page) {
                window.location.href = `/page/${data.page}#${surah}_${ayah}`;
            }
        }

        function handlePageSearch(event) {
            event.preventDefault();
            let page = document.querySelector("input[name='page']").value;
            if (page >= 1 && page <= 604) {
                window.location.href = `/page/${page}`;
            }
        }
    </script>
</head>
<body>
    <div class="container">
        <div class="logo">
            <img src="{{ url_for('static', filename='img/quranku.png') }}" alt="Quranku Logo">
        </div>
        <h1>Quran Per Halaman. Silahkan Pilih Menu:</h1>

        <!-- Menu 1: Pilih Juz -->
        <div class="menu-box">
            <div class="menu-title">1. Cari Berdasarkan Juz</div>
            <form onsubmit="handleJuzSearch(event)" class="inline-form-group">
                <select name="juz" required>
                    <option value="">Pilih Juz</option>
                    {% for juz in range(1, 31) %}
                        <option value="{{ juz }}">Juz {{ juz }}</option>
                    {% endfor %}
                </select>
                <button type="submit">Lihat</button>
            </form>
        </div>

        <!-- Menu 2: Cari Surah -->
        <div class="menu-box">
            <div class="menu-title">2. Cari Surah dan Ayat</div>
            <form onsubmit="handleSurahSearch(event)" class="inline-form-group">
                <input type="number" name="surah" placeholder="Surah" min="1" max="114" required>
                <input type="number" name="ayah" placeholder="Ayat" min="1" required>
                <button type="submit">Lihat</button>
            </form>
        </div>

        <!-- Menu 3: Cari Halaman -->
        <div class="menu-box">
            <div class="menu-title">3. Cari Berdasarkan Halaman</div>
            <form onsubmit="handlePageSearch(event)" class="inline-form-group">
                <input type="number" name="page" placeholder="Halaman (1-604)" min="1" max="604" required>
                <button type="submit">Lihat</button>
            </form>
        </div>
    </div>
</body>
</html>
